/* src/app/page.module.css */

/* Always-defined knobs */
:root {
  --bg-fade: 2.2s;            /* slower and readable */
  --bg-delay: 0.12s;          /* small beat before fade begins */
  --intro-delay: 2.6s;        /* title comes after bg fade begins */
  --sparkle-strength: 0.90;
  --vignette-dark: 0.78;
  --vignette-top: 0.28;

  --leave-text: 420ms;        /* how long the text fades out */
  --letter-delay: 280ms;      /* wait after click before letter starts */
  --letter-rise: 900ms;       /* letter slide duration */
}


.stage {
  position: relative;
  min-height: 100vh;
  overflow: hidden;
  color: #fff;
  background: #000; /* hard fallback */
}

/* Background image layer */
.bg {
  position: absolute;
  inset: 0;
  z-index: 0;
  background: #000;
}

.bgImg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;

  opacity: 0;
  transform: scale(1.02);
  will-change: opacity, transform;
}

/* vignette overlay */
.bgVignette {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(
      ellipse at top,
      rgba(20, 30, 60, var(--vignette-top)),
      rgba(0, 0, 0, var(--vignette-dark))
    ),
    linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.10),
      rgba(0, 0, 0, var(--vignette-dark))
    );

  opacity: 0;
  will-change: opacity;
}

/* black overlay to guarantee "black -> dark" */
.blackFade {
  position: absolute;
  inset: 0;
  background: #000;
  opacity: 1;
  will-change: opacity;
}

/* Sparkles overlay */
.sparkles {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}

.sparkles::before {
  content: "";
  position: absolute;
  left: -10%;
  top: -10%;
  width: 2px;
  height: 2px;
  border-radius: 999px;
  background: rgba(120, 170, 255, 0.8);

  box-shadow:
    10vw 15vh rgba(120, 170, 255, 0.75),
    18vw 42vh rgba(120, 170, 255, 0.55),
    25vw 22vh rgba(120, 170, 255, 0.65),
    32vw 70vh rgba(120, 170, 255, 0.50),
    40vw 30vh rgba(120, 170, 255, 0.70),
    48vw 55vh rgba(120, 170, 255, 0.55),
    55vw 18vh rgba(120, 170, 255, 0.65),
    62vw 62vh rgba(120, 170, 255, 0.55),
    70vw 25vh rgba(120, 170, 255, 0.70),
    78vw 48vh rgba(120, 170, 255, 0.50),
    85vw 68vh rgba(120, 170, 255, 0.60),
    92vw 35vh rgba(120, 170, 255, 0.55),
    12vw 78vh rgba(120, 170, 255, 0.45),
    28vw 85vh rgba(120, 170, 255, 0.55),
    44vw 82vh rgba(120, 170, 255, 0.50),
    60vw 88vh rgba(120, 170, 255, 0.45),
    76vw 84vh rgba(120, 170, 255, 0.55),
    90vw 80vh rgba(120, 170, 255, 0.45);

  opacity: 0;
  filter: drop-shadow(0 0 8px rgba(120, 170, 255, 0.35));
  will-change: opacity, transform;
}

/* Content */
.content {
  position: relative;
  z-index: 2;
  min-height: 100vh;
  display: grid;
  place-items: center;
  padding: 24px;
}

.card {
  width: min(720px, 92vw);
  text-align: center;
  padding: 28px 22px;
  background: transparent;
  border: none;
  box-shadow: none;
}

/* Top-right hub button */
.hubBtn {
  position: absolute;
  top: 18px;
  right: 18px;
  z-index: 3;

  opacity: 0;
  transform: translateY(-8px);
}

.hubBtn a {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  color: rgba(235, 245, 255, 0.95);
  background: rgba(10, 14, 28, 0.45);
  border: 1px solid rgba(120, 170, 255, 0.22);
  text-decoration: none;
  font-size: 14px;
}

.hubBtn a:hover {
  transform: translateY(-1px);
  transition: transform 120ms ease;
}

/* Text */
.title {
  font-size: clamp(44px, 6vw, 64px);
  margin: 0;
  letter-spacing: 0.5px;
  opacity: 0;
  transform: translateY(14px);
  text-shadow: 0 10px 30px rgba(0, 0, 0, 0.65);
  will-change: opacity, transform;
}

.tagline {
  margin: 10px 0 0;
  font-size: clamp(16px, 2.1vw, 19px);
  color: rgba(235, 245, 255, 0.85);
  opacity: 0;
  transform: translateY(14px);
  text-shadow: 0 8px 24px rgba(0, 0, 0, 0.65);
  will-change: opacity, transform;
}

.actions {
  margin-top: 22px;
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
  opacity: 0;
  transform: translateY(14px);
  will-change: opacity, transform;
}

/* Button */
.primaryBtn {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  border-radius: 14px;
  padding: 12px 14px;
  border: 1px solid rgba(120, 170, 255, 0.30);
  background: rgba(20, 28, 52, 0.60);
  color: rgba(255, 255, 255, 0.95);
  cursor: pointer;
  font-size: 15px;
  line-height: 1;
}

.primaryBtn:hover {
  transform: translateY(-1px);
  transition: transform 120ms ease;
}

.letterMiniImg {
  width: 34px;
  height: 26px;
  object-fit: contain;
  transform: rotate(-4deg);
  filter: drop-shadow(0 6px 16px rgba(0, 0, 0, 0.25));
  flex: 0 0 auto;
}

/* Leaving: fade content out */
.leaving .card {
  opacity: 0;
  transform: translateY(-10px) scale(0.99);
  transition: opacity var(--leave-text) ease, transform var(--leave-text) ease;
}

/* Letter overlay for leaving animation (85% viewport height) */
.letterOverlay {
  position: absolute;
  left: 50%;
  top: 50%;
  width: min(900px, 98vw);
  height: 85vh;
  z-index: 4;
  pointer-events: none;
  display: grid;
  place-items: center;

  opacity: 0;
  transform: translate(-50%, 120%) rotate(-1deg);
  will-change: transform, opacity;
}

.letterImg {
  width: 100%;
  height: 100%;
  object-fit: contain;
  filter: drop-shadow(0 22px 70px rgba(0, 0, 0, 0.65));
}

/* READY (intro animations) */
.ready .bgImg {
  animation: bgFadeIn var(--bg-fade) ease-out var(--bg-delay) forwards;
}

.ready .bgVignette {
  animation: vignetteIn var(--bg-fade) ease-out var(--bg-delay) forwards;
}

.ready .blackFade {
  animation: blackFadeOut var(--bg-fade) ease-out var(--bg-delay) forwards;
}

/* Sparkles appear after background starts */
.ready .sparkles::before {
  animation:
    sparkleIn 900ms ease-out calc(var(--bg-delay) + 1.2s) forwards,
    twinkle 3.5s ease-in-out calc(var(--bg-delay) + 1.8s) infinite;
}

/* Staggered intro */
.ready .title {
  animation: contentIn 800ms ease-out var(--intro-delay) forwards;
}
.ready .tagline {
  animation: contentIn 800ms ease-out calc(var(--intro-delay) + 0.24s) forwards;
}
.ready .actions {
  animation: contentIn 800ms ease-out calc(var(--intro-delay) + 0.50s) forwards;
}
.ready .hubBtn {
  animation: contentIn 800ms ease-out calc(var(--intro-delay) + 0.62s) forwards;
}

/* Leaving letter slide */
.leaving .letterOverlay {
  animation: letterRise var(--letter-rise) cubic-bezier(0.2, 0.9, 0.2, 1) var(--letter-delay) forwards;
}

/* Motion accessibility */
@media (prefers-reduced-motion: reduce) {
  /* Kill animations */
  .bgImg,
  .bgVignette,
  .blackFade,
  .sparkles::before,
  .title,
  .tagline,
  .actions,
  .hubBtn,
  .letterOverlay {
    animation: none !important;
  }

  /* Show the final intended background (NOT black) */
  .bgImg {
    opacity: 1 !important;
    transform: none !important;
  }

  .bgVignette {
    opacity: 1 !important;
  }

  /* Remove the black overlay completely */
  .blackFade {
    opacity: 0 !important;
  }

  /* Show content immediately */
  .title,
  .tagline,
  .actions,
  .hubBtn {
    opacity: 1 !important;
    transform: none !important;
  }

  /* Keep the letter hidden unless leaving */
  .letterOverlay {
    opacity: 0 !important;
    transform: translate(-50%, 120%) rotate(-1deg) !important;
  }

  .leaving .letterOverlay {
    opacity: 0.9 !important;
    transform: translate(-50%, -50%) rotate(-1deg) !important;
  }

  /* Optional: either show sparkles softly or hide them completely */
  .sparkles::before {
    opacity: var(--sparkle-strength) !important;
    transform: none !important;
  }
}


/* Keyframes */
@keyframes bgFadeIn {
  from { opacity: 0; transform: scale(1.02); }
  to   { opacity: 1; transform: scale(1.00); }
}

@keyframes vignetteIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes blackFadeOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}

@keyframes contentIn {
  to { opacity: 1; transform: translateY(0); }
}

@keyframes sparkleIn {
  to { opacity: var(--sparkle-strength); }
}

@keyframes twinkle {
  0%, 100% { opacity: 0.55; transform: translate(0, 0); }
  50%      { opacity: 1; transform: translate(10px, 6px); }
}

@keyframes letterRise {
  from {
    transform: translate(-50%, 120%) rotate(-1deg);
    opacity: 0;
  }
  to {
    transform: translate(-50%, -50%) rotate(-1deg);
    opacity: 0.9;
  }
}
