/* src/app/page.module.css */

.stage {
  /* Local knobs */
  --bgDur: 4400ms;
  --textDelay: 1500ms;
  --textDur: 2700ms;
  --sparkleStrength: 1;

  --vignetteDark: 0.78;
  --vignetteTop: 0.28;

  --leaveFade: 720ms;
  --letterDelay: 860ms;
  --letterDur: 2900ms;

  position: relative;
  min-height: 100vh;
  overflow: hidden;
  color: #fff;
  background: #000;
}

/* Background layer */
.bg {
  position: absolute;
  inset: 0;
  z-index: 0;
  background: #000;
}

.bgImg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;

  opacity: 0;
  transform: scale(1.02);
  transition: opacity var(--bgDur) ease, transform var(--bgDur) ease;
  will-change: opacity, transform;
}

.bgVignette {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(
      ellipse at top,
      rgba(20, 30, 60, var(--vignetteTop)),
      rgba(0, 0, 0, var(--vignetteDark))
    ),
    linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.10),
      rgba(0, 0, 0, var(--vignetteDark))
    );
  opacity: 0;
  transition: opacity var(--bgDur) ease;
  will-change: opacity;
}

/* Always starts fully black, fades away */
.blackFade {
  position: absolute;
  inset: 0;
  background: #000;
  opacity: 1;
  transition: opacity var(--bgDur) ease;
  will-change: opacity;
}

/* Sparkles */
.sparkles {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}

.sparkles::before {
  content: "";
  position: absolute;
  left: -10%;
  top: -10%;
  width: 3px;
  height: 3px;
  border-radius: 999px;
  background: rgba(170, 205, 255, 0.95);

  box-shadow:
    /* original-ish */
    10vw 15vh rgba(170, 205, 255, 0.95),
    18vw 42vh rgba(170, 205, 255, 0.70),
    25vw 22vh rgba(170, 205, 255, 0.85),
    32vw 70vh rgba(170, 205, 255, 0.65),
    40vw 30vh rgba(170, 205, 255, 0.90),
    48vw 55vh rgba(170, 205, 255, 0.70),
    55vw 18vh rgba(170, 205, 255, 0.85),
    62vw 62vh rgba(170, 205, 255, 0.70),
    70vw 25vh rgba(170, 205, 255, 0.90),
    78vw 48vh rgba(170, 205, 255, 0.65),
    85vw 68vh rgba(170, 205, 255, 0.80),
    92vw 35vh rgba(170, 205, 255, 0.70),

    /* extra density */
    6vw 28vh rgba(170, 205, 255, 0.60),
    8vw 62vh rgba(170, 205, 255, 0.55),
    14vw 10vh rgba(170, 205, 255, 0.55),
    16vw 74vh rgba(170, 205, 255, 0.50),
    20vw 58vh rgba(170, 205, 255, 0.60),
    22vw 34vh rgba(170, 205, 255, 0.55),
    26vw 12vh rgba(170, 205, 255, 0.50),
    30vw 40vh rgba(170, 205, 255, 0.60),
    34vw 16vh rgba(170, 205, 255, 0.55),
    36vw 86vh rgba(170, 205, 255, 0.50),
    38vw 64vh rgba(170, 205, 255, 0.55),
    42vw 8vh rgba(170, 205, 255, 0.55),
    46vw 24vh rgba(170, 205, 255, 0.55),
    50vw 72vh rgba(170, 205, 255, 0.55),
    52vw 38vh rgba(170, 205, 255, 0.55),
    56vw 10vh rgba(170, 205, 255, 0.50),
    58vw 50vh rgba(170, 205, 255, 0.60),
    64vw 14vh rgba(170, 205, 255, 0.55),
    66vw 44vh rgba(170, 205, 255, 0.55),
    72vw 58vh rgba(170, 205, 255, 0.55),
    74vw 8vh rgba(170, 205, 255, 0.50),
    80vw 20vh rgba(170, 205, 255, 0.55),
    82vw 54vh rgba(170, 205, 255, 0.55),
    86vw 30vh rgba(170, 205, 255, 0.55),
    88vw 76vh rgba(170, 205, 255, 0.50),
    94vw 60vh rgba(170, 205, 255, 0.55),
    96vw 18vh rgba(170, 205, 255, 0.50);

  opacity: 0;
  transition: opacity 900ms ease;

  /* MUCH stronger glow */
  filter:
    drop-shadow(0 0 12px rgba(120, 170, 255, 0.75))
    drop-shadow(0 0 28px rgba(120, 170, 255, 0.45));
}


/* Content */
.content {
  position: relative;
  z-index: 2;
  min-height: 100vh;
  display: grid;
  place-items: center;
  padding: 24px;
}

.card {
  width: min(720px, 92vw);
  text-align: center;
  padding: 28px 22px;
  background: transparent;
}

/* Hub button */
.hubBtn {
  position: absolute;
  top: 18px;
  right: 18px;
  z-index: 3;

  opacity: 0;
  transform: translateY(-8px);
  transition: opacity var(--textDur) ease, transform var(--textDur) ease;
}

.hubBtn a {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  color: rgba(235, 245, 255, 0.95);
  background: rgba(10, 14, 28, 0.45);
  border: 1px solid rgba(120, 170, 255, 0.22);
  text-decoration: none;
  font-size: 14px;
}

/* Text blocks start hidden */
.title,
.tagline,
.actions {
  opacity: 0;
  transform: translateY(14px);
  transition:
    opacity var(--textDur) ease var(--textDelay),
    transform var(--textDur) ease;
}

.title {
  font-size: clamp(44px, 6vw, 64px);
  margin: 0;
  letter-spacing: 0.5px;
  text-shadow: 0 10px 30px rgba(0, 0, 0, 0.65);
}

.tagline {
  margin: 10px 0 0;
  font-size: clamp(16px, 2.1vw, 19px);
  color: rgba(235, 245, 255, 0.85);
  text-shadow: 0 8px 24px rgba(0, 0, 0, 0.65);
}

.actions {
  margin-top: 22px;
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
}

/* Button */
.primaryBtn {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  border-radius: 14px;
  padding: 12px 14px;
  border: 1px solid rgba(120, 170, 255, 0.30);
  background: rgba(20, 28, 52, 0.60);
  color: rgba(255, 255, 255, 0.95);
  cursor: pointer;
  font-size: 15px;
  line-height: 1;
}

.primaryBtn:hover {
  transform: translateY(-1px);
  transition: transform 120ms ease;
}

.letterMiniImg {
  width: 34px;
  height: 26px;
  object-fit: contain;
  transform: rotate(-4deg);
  filter: drop-shadow(0 6px 16px rgba(0, 0, 0, 0.25));
}

/* Letter overlay (hidden until leaving) */
.letterOverlay {
  position: absolute;
  left: 50%;
  top: 50%;
  width: min(900px, 98vw);
  height: 85vh;
  z-index: 4;
  pointer-events: none;

  opacity: 0.9;
  transform: translate(-50%, 120%) rotate(-1deg);
  transition:
    opacity var(--letterDur) ease var(--letterDelay),
    transform var(--letterDur) cubic-bezier(0.2, 0.9, 0.2, 1) var(--letterDelay);
  will-change: opacity, transform;
}

.letterImg {
  width: 100%;
  height: 100%;
  object-fit: contain;
  filter: drop-shadow(0 22px 70px rgba(0, 0, 0, 0.65));
}

/* Phase progression (CUMULATIVE classes now) */
.phase1 .bgImg {
  opacity: 1;
  transform: scale(1);
}
.phase1 .bgVignette {
  opacity: 1;
}
.phase1 .blackFade {
  opacity: 0;
}
.phase1 .sparkles::before {
  opacity: var(--sparkleStrength);
}

.phase2 .title {
  opacity: 1;
  transform: translateY(0);
}

.phase3 .tagline {
  opacity: 1;
  transform: translateY(0);
}

.phase4 .actions,
.phase4 .hubBtn {
  opacity: 1;
  transform: translateY(0);
}

/* Leaving (fade content, slide letter) */
.leaving .card {
  opacity: 0;
  transform: translateY(-10px) scale(0.99);
  transition: opacity var(--leaveFade) ease, transform var(--leaveFade) ease;
}

.leaving .letterOverlay {
  opacity: 0.9;
  transform: translate(-50%, -50%) rotate(-1deg);
}
